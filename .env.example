# ============================================================
# 8004 Solana Indexer
# ============================================================

# Database mode
# - supabase: required for GraphQL endpoint
# - local: required for REST v1 endpoint
DB_MODE=supabase

# Supabase/PostgreSQL
SUPABASE_DSN=POSTGRES_DSN_REDACTED
SUPABASE_SSL_VERIFY=true
SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_KEY=service_role_key

# Local Prisma (REST mode)
# DATABASE_URL=file:./data/indexer.db

# Solana RPC
RPC_URL=https://api.devnet.solana.com
WS_URL=wss://api.devnet.solana.com

# API mode
# both (default) | graphql | rest
API_MODE=both
ENABLE_GRAPHQL=true
API_PORT=3001
# Cache TTL for globalStats/protocol aggregates (milliseconds)
GRAPHQL_STATS_CACHE_TTL_MS=60000

# Verification
VERIFICATION_ENABLED=true
VERIFY_INTERVAL_MS=60000
VERIFY_BATCH_SIZE=100
VERIFY_SAFETY_MARGIN_SLOTS=32

# Metadata extraction
INDEX_METADATA=normal
# Collection CID ingestion (c1:<cid> -> JSON standard fields)
INDEX_COLLECTION_METADATA=true
