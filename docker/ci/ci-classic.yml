name: 8004-classic-ci

services:
  tests:
    build:
      context: ../..
      dockerfile: Dockerfile
      target: test
    environment:
      DB_MODE: local
      DATABASE_URL: file:./data/indexer.db
      API_MODE: rest
      RPC_URL: https://api.devnet.solana.com
      WS_URL: wss://api.devnet.solana.com
      LOG_LEVEL: warn
    command: ["npx", "vitest", "run", "tests/unit/config.test.ts", "tests/unit/parser/types.test.ts", "tests/unit/parser/decoder.test.ts"]
